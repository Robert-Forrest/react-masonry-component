{"version":3,"file":"index.js","names":["isBrowser","window","Masonry","require","imagesloaded","MasonryComponent","props","masonry","erd","undefined","latestKnownDomChildren","imagesLoadedCancelRef","masonryContainer","initializeMasonry","bind","getCurrentDomChildren","diffDomChildren","performLayout","derefImagesLoaded","imagesLoaded","reloadLayout","initializeResizableChildren","listenToElementResize","destroyErd","force","options","onLayoutComplete","on","onRemoveComplete","node","children","itemSelector","querySelectorAll","Array","prototype","slice","call","forceItemReload","knownChildrenStillAttached","filter","element","parentNode","length","currentDomChildren","removed","attachedKnownChild","indexOf","newDomChildren","currentChild","beginningIndex","prepended","newChild","prepend","appended","el","moved","child","index","old","new","diff","reloadItems","enableResizableChildren","forEach","removeAllListeners","remove","updateOnEachComponentUpdate","disableImagesLoaded","event","updateOnEachImageLoad","handler","debounce","instance","onImagesLoaded","imgLoad","imagesLoadedOptions","off","cancel","layout","leading","elementResizeDetectorMaker","strategy","listenTo","uninstall","destroy","omit","Object","keys","propTypes","React","createElement","elementType","ref","n","Component","module","exports","default","defaultProps","className","PropTypes","bool","func","object","string"],"sources":["../src/index.js"],"sourcesContent":["import React, { Component } from 'react'\nimport elementResizeDetectorMaker from 'element-resize-detector'\nimport debounce from 'lodash.debounce'\nimport omit from 'lodash.omit'\nimport PropTypes from 'prop-types'\n\nconst isBrowser = typeof window !== 'undefined'\nconst Masonry = isBrowser ? window.Masonry || require('masonry-layout') : null\nconst imagesloaded = isBrowser ? require('imagesloaded') : null\n\nclass MasonryComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.masonry = false\n    this.erd = undefined\n    this.latestKnownDomChildren = []\n    this.imagesLoadedCancelRef = undefined\n    this.masonryContainer = undefined\n\n    this.initializeMasonry = this.initializeMasonry.bind(this)\n    this.getCurrentDomChildren = this.getCurrentDomChildren.bind(this)\n    this.diffDomChildren = this.diffDomChildren.bind(this)\n    this.performLayout = this.performLayout.bind(this)\n    this.derefImagesLoaded = this.derefImagesLoaded.bind(this)\n    this.imagesLoaded = this.imagesLoaded.bind(this)\n    this.reloadLayout = this.reloadLayout.bind(this)\n    this.initializeResizableChildren = this.initializeResizableChildren.bind(this)\n    this.listenToElementResize = this.listenToElementResize.bind(this)\n    this.destroyErd = this.destroyErd.bind(this)\n  }\n\n  initializeMasonry (force) {\n    if (!this.masonry || force) {\n      this.masonry = new Masonry(\n        this.masonryContainer,\n        this.props.options\n      )\n\n      if (this.props.onLayoutComplete) {\n        this.masonry.on('layoutComplete', this.props.onLayoutComplete)\n      }\n\n      if (this.props.onRemoveComplete) {\n        this.masonry.on('removeComplete', this.props.onRemoveComplete)\n      }\n\n      this.latestKnownDomChildren = this.getCurrentDomChildren()\n    }\n  }\n\n  getCurrentDomChildren () {\n    const node = this.masonryContainer\n    const children = this.props.options.itemSelector ? node.querySelectorAll(this.props.options.itemSelector) : node.children\n    return Array.prototype.slice.call(children)\n  }\n\n  diffDomChildren () {\n    let forceItemReload = false\n\n    const knownChildrenStillAttached = this.latestKnownDomChildren.filter(function(element) {\n      /*\n       * take only elements attached to DOM\n       * (aka the parent is the masonry container, not null)\n       * otherwise masonry would try to \"remove it\" again from the DOM\n       */\n      return !!element.parentNode\n    })\n\n    /*\n     * If not all known children are attached to the dom - we have no other way of notifying\n     * masonry to remove the ones not still attached besides invoking a complete item reload.\n     * basically all the rest of the code below does not matter in that case.\n     */\n    if (knownChildrenStillAttached.length !== this.latestKnownDomChildren.length) {\n      forceItemReload = true\n    }\n\n    const currentDomChildren = this.getCurrentDomChildren()\n\n    /*\n     * Since we are looking for a known child which is also attached to the dom AND\n     * not attached to the dom at the same time - this would *always* produce an empty array.\n     */\n    const removed = knownChildrenStillAttached.filter(function(attachedKnownChild) {\n      return !~currentDomChildren.indexOf(attachedKnownChild)\n    })\n\n    /*\n     * This would get any children which are attached to the dom but are *unkown* to us\n     * from previous renders\n     */\n    const newDomChildren = currentDomChildren.filter(function(currentChild) {\n      return !~knownChildrenStillAttached.indexOf(currentChild)\n    })\n\n    let beginningIndex = 0\n\n    // get everything added to the beginning of the DOMNode list\n    const prepended = newDomChildren.filter(function(newChild) {\n      const prepend = (beginningIndex === currentDomChildren.indexOf(newChild))\n\n      if (prepend) {\n        // increase the index\n        beginningIndex++\n      }\n\n      return prepend\n    })\n\n    // we assume that everything else is appended\n    const appended = newDomChildren.filter(function(el) {\n      return prepended.indexOf(el) === -1\n    })\n\n    /*\n     * otherwise we reverse it because so we're going through the list picking off the items that\n     * have been added at the end of the list. this complex logic is preserved in case it needs to be\n     * invoked\n     *\n     * const endingIndex = currentDomChildren.length - 1\n     *\n     * newDomChildren.reverse().filter(function(newChild, i){\n     *     const append = endingIndex == currentDomChildren.indexOf(newChild)\n     *\n     *     if (append) {\n     *         endingIndex--\n     *     }\n     *\n     *     return append\n     * })\n     */\n\n    // get everything added to the end of the DOMNode list\n    let moved = []\n\n    /*\n     * This would always be true (see above about the lofic for \"removed\")\n     */\n    if (removed.length === 0) {\n      /*\n       * 'moved' will contain some random elements (if any) since the \"knownChildrenStillAttached\" is a filter\n       * of the \"known\" children which are still attached - All indexes could basically change. (for example\n       * if the first element is not attached)\n       * Don't trust this array.\n       */\n      moved = knownChildrenStillAttached.filter(function(child, index) {\n        return index !== currentDomChildren.indexOf(child)\n      })\n    }\n\n    this.latestKnownDomChildren = currentDomChildren\n\n    return {\n      old: knownChildrenStillAttached, // Not used\n      new: currentDomChildren, // Not used\n      removed: removed,\n      appended: appended,\n      prepended: prepended,\n      moved: moved,\n      forceItemReload: forceItemReload\n    }\n  }\n\n  performLayout () {\n    const diff = this.diffDomChildren()\n    let reloadItems = diff.forceItemReload || diff.moved.length > 0\n\n    // Would never be true. (see comments of 'diffDomChildren' about 'removed')\n    if (diff.removed.length > 0) {\n      if (this.props.enableResizableChildren) {\n        diff.removed.forEach(this.erd.removeAllListeners, this.erd)\n      }\n      this.masonry.remove(diff.removed)\n      reloadItems = true\n    }\n\n    if (diff.appended.length > 0) {\n      this.masonry.appended(diff.appended)\n\n      if (diff.prepended.length === 0) {\n        reloadItems = true\n      }\n\n      if (this.props.enableResizableChildren) {\n        diff.appended.forEach(this.listenToElementResize, this)\n      }\n    }\n\n    if (diff.prepended.length > 0) {\n      if (!reloadItems) {\n        this.masonry.prepended(diff.prepended)\n      }\n\n      if (this.props.enableResizableChildren) {\n        diff.prepended.forEach(this.listenToElementResize, this)\n      }\n    }\n\n    if (reloadItems) {\n      this.masonry.reloadItems()\n    }\n\n    if (this.props.updateOnEachComponentUpdate || reloadItems) {\n      this.reloadLayout()\n    }\n  }\n\n  derefImagesLoaded () {\n    this.imagesLoadedCancelRef()\n    this.imagesLoadedCancelRef = undefined\n  }\n\n  imagesLoaded () {\n    if (this.props.disableImagesLoaded) {\n      return\n    }\n\n    if (this.imagesLoadedCancelRef) {\n      this.derefImagesLoaded()\n    }\n\n    const event = this.props.updateOnEachImageLoad ? 'progress' : 'always'\n    const handler = debounce(\n      function(instance) {\n        if (this.props.onImagesLoaded) {\n          this.props.onImagesLoaded(instance)\n        }\n        this.reloadLayout()\n      }.bind(this), 100)\n\n    const imgLoad = imagesloaded(this.masonryContainer, this.props.imagesLoadedOptions).on(event, handler)\n\n    this.imagesLoadedCancelRef = function() {\n      imgLoad.off(event, handler)\n      handler.cancel()\n    }\n  }\n\n  reloadLayout () {\n    debounce(() => {\n        this.masonry.layout()\n      }, 100, {\n        leading: true\n      }\n    )\n  }\n\n  initializeResizableChildren () {\n    if (!this.props.enableResizableChildren) {\n      return\n    }\n\n    this.erd = elementResizeDetectorMaker({\n      strategy: 'scroll'\n    })\n\n    this.latestKnownDomChildren.forEach(this.listenToElementResize, this)\n  }\n\n  listenToElementResize (el) {\n    this.erd.listenTo(el, this.reloadLayout)\n  }\n\n  destroyErd () {\n    if (this.erd) {\n      this.latestKnownDomChildren.forEach(this.erd.uninstall, this.erd)\n    }\n  }\n\n  componentDidMount () {\n    this.initializeMasonry()\n    this.initializeResizableChildren()\n    this.imagesLoaded()\n  }\n\n  componentDidUpdate () {\n    this.performLayout()\n    this.imagesLoaded()\n  }\n\n  componentWillUnmount () {\n    this.destroyErd()\n\n    // unregister events\n    if (this.props.onLayoutComplete) {\n      this.masonry.off('layoutComplete', this.props.onLayoutComplete)\n    }\n\n    if (this.props.onRemoveComplete) {\n      this.masonry.off('removeComplete', this.props.onRemoveComplete)\n    }\n\n    if (this.imagesLoadedCancelRef) {\n      this.derefImagesLoaded()\n    }\n    this.masonry.destroy()\n  }\n\n  render () {\n    const props = omit(this.props, Object.keys(MasonryComponent.propTypes))\n    return React.createElement(this.props.elementType, {...props, ref: n => this.masonryContainer = n }, this.props.children)\n  }\n}\n\nmodule.exports = MasonryComponent\nmodule.exports.default = MasonryComponent\n\nMasonryComponent.defaultProps = {\n  enableResizableChildren: false,\n  disableImagesLoaded: false,\n  updateOnEachImageLoad: false,\n  options: {},\n  imagesLoadedOptions: {},\n  className: '',\n  elementType: 'div',\n  onLayoutComplete: () => {},\n  onRemoveComplete: () => {},\n  updateOnEachComponentUpdate: true\n}\n\n\nMasonryComponent.propTypes = {\n  enableResizableChildren: PropTypes.bool,\n  disableImagesLoaded: PropTypes.bool,\n  onImagesLoaded: PropTypes.func,\n  updateOnEachImageLoad: PropTypes.bool,\n  options: PropTypes.object,\n  imagesLoadedOptions: PropTypes.object,\n  elementType: PropTypes.string,\n  onLayoutComplete: PropTypes.func,\n  onRemoveComplete: PropTypes.func,\n  updateOnEachComponentUpdate: PropTypes.bool\n}\n"],"mappings":"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"}